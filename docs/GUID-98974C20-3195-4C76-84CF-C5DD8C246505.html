<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="WINC Devices – Integrated Serial Flash Memory Download Procedure" />
<meta name="DC.relation" scheme="URI" content="GUID-B02CCF0F-B40C-487D-8D4D-570EFA78D2BF.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="winc-devices--integrated-serial-flash-memory-download-procedure" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>WINC Devices – Integrated Serial Flash Memory Download Procedure</title>
<meta name="Microsoft.Help.Id" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2-winc-devices--integrated-serial-flash-memory-download-procedure" />
<meta name="Microsoft.Help.TocParent" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony WINC3400 Wireless Applications Reference A 12/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-98974C20-3195-4C76-84CF-C5DD8C246505"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="winc-devices--integrated-serial-flash-memory-download-procedure">
<h1 class="title topictitle1" id="ariaid-title1" style="">WINC Devices – Integrated Serial Flash Memory Download Procedure</h1><div class="body"><p class="p">ATWINC1500/ATWINC3400 features an on-chip microcontroller and integrated SPI Flash memory for
system firmware. The serial flash memory also stores the root certificate required for TLS/SSL connection
and the gain table values used by transceiver. This application note explains in detail downloading
procedure of firmware, certificate, and gain values into WINC serial flash through different supported serial interfaces like UART/I2C. This document also covers some useful troubleshooting tips for downloading failures.</p>
<p class="p"><strong class="ph b">Features:</strong></p>
<ul class="ul"><li class="li"><p class="p">Firmware download procedure</p>
</li>
<li class="li"><p class="p">Root certificate download procedure</p>
</li>
<li class="li"><p class="p">Gain table values download procedure</p>
</li>
<li class="li"><p class="p">Troubleshooting tips</p>
</li>
<li class="li"><p class="p">Common download procedure for WINC1500 and WINC3400</p>
</li>
</ul>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-B02CCF0F-B40C-487D-8D4D-570EFA78D2BF.html">Harmony 3 Wireless application examples for WINC3400</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="introduction"><h2 class="title topictitle2" id="ariaid-title2" style="">Introduction</h2><div class="body"><p class="p">The WINC1500 or WINC3400 firmware update project will be available in the path {local system path}\wireless_wifi\utilities\wifi\winc. The latest firmware update project contains the new firmware images as well as the batch script and Shell script files used to download the firmware into Wi-Fi Network Controller (WINC) through SPI/UART.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="firmware-update-project"><h2 class="title topictitle2" id="ariaid-title3" style="">Firmware update project</h2><div class="body"><p class="p">The ATWINC1500 and ATWINC3400 WiFi devices require firmware to be loaded into flash memory. The ATWINC1500 and ATWINC3400 devices are preloaded with the firmware, however it would be useful to update the latest firmware to take advantage of fixes and new features.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="download-wireless-repository-from-github"><h2 class="title topictitle2" id="ariaid-title4" style="">Download wireless repository from Github</h2><div class="body"><p class="p">Install MPLAB® X Integrated Development Environment (IDE).
After the installation, open the MPLAB IDE and launch H3 content manager from the IDE</p>
<br /><img class="image" src="GUID-B303C9EF-03C6-4C55-8C23-DCCCD4009D6B-low.png" alt="content_manager" /><br /><p class="p">Please provide the framework path with the local system path.</p>
<br /><img class="image" src="GUID-A3C2536A-6FB0-45A8-BEA0-63EE2B0517EA-low.png" alt="content_manager_2" /><br /><p class="p">This displays a new window as shown below.</p>
<br /><img class="image" src="GUID-439173D4-EE64-4F06-A5BF-B23ED011B051-low.png" alt="content_manager_3" /><br /><p class="p">Using this window, user can download either all the packages or only the wireless packages with its required dependencies.</p>
<p class="p">To download the wireless packages and its dependencies:</p>
<ul class="ul"><li class="li"><p class="p">Scroll down and select <strong class="ph b">wireless_wifi, wireless_apps_winc1500 and wireless_apps_winc3400</strong>.</p>
</li>
<li class="li"><p class="p">Click <strong class="ph b">Download Selected</strong></p>
</li>
</ul>
<br /><img class="image" src="GUID-5BC04241-9C32-4468-BAA7-A517F82DA863-low.png" alt="content_manager_4" /><br /><p class="p">It requests permission to download its dependencies. Click <strong class="ph b">OK</strong></p>
<br /><img class="image" src="GUID-4520C145-317C-4B49-82C5-F05DD1B3E48B-low.png" alt="content_manager_5" /><br /><p class="p">In the License Window</p>
<ul class="ul"><li class="li"><p class="p">Select <strong class="ph b">Accept All License</strong></p>
</li>
<li class="li"><p class="p">Click <strong class="ph b">Close</strong></p>
</li>
</ul>
<p class="p">Go to the local system path and check if the following packages are downloaded correctly</p>
<br /><img class="image" src="GUID-644C111A-B49E-41C0-9AE9-1E0446AC9E79-low.png" alt="content_manager_6" /><br /><p class="p">The firmware upgrade tool for WINC devices will be available in :  {local system path}\wireless_wifi\utilities\wifi\winc</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="hardware-setup"><h2 class="title topictitle2" id="ariaid-title5" style="">Hardware Setup</h2><div class="body"><ul class="ul"><li class="li"><p class="p">SAM D21 Xplained Pro Evaluation Kit (ATSAMD21-XPRO) - SAMD21 is used as a HostMCU</p>
</li>
<li class="li"><p class="p">ATWINC1500 / WINC3400 Xplained PRO Evaluation Kit (ATWINC1500-XPRO / ATWINC3400-XPRO) - Wi-Fi SPI slave device connected to SAMD21 HostMCU device</p>
</li>
<li class="li"><p class="p">The ATWINC1500 / ATWINC3400 device is attached to EXT1 of the SAMD21 Xplained Pro kit.</p>
</li>
<li class="li with-image"><p class="p">Plug a micro-USB cable from Windows computer to the debug USB port of the SAM D21 Xplained Pro Evaluation kit</p>
<br /><img class="image" src="GUID-FC167C73-FCC9-400F-A35A-39C77E8CCD0C-low.png" alt="hardware" /><br /></li>
</ul>
<p class="p"><strong class="ph b">Note</strong></p>
<p class="p">If the user is using SAMA5D27 host, do not reset the board after programming the serial bridge application.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title6" id="serial-bridge-application"><h2 class="title topictitle2" id="ariaid-title6" style="">Serial Bridge Application</h2><div class="body"><p class="p">As the WINC device is connected to host MCU through SPI interface, upgrading the WINC serial flash via the host MCU would be an easier solution. Since, WINC provides transparent access to host MCU, the WINC serial flash can be read/written from host MCU. The host MCU can program the serial (SPI) flash without the need for operational firmware in the WINC. The host MCU running the serial bridge firmware is connected between computer and WINC SPI to download the firmware to WINC serial flash.
<strong class="ph b">winc_programmer_UART (PC) &lt;—-&gt; samd21_xplained_pro_serial_bridge.elf(Host) &lt;—-&gt; WINC SPI device</strong></p>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title7" id="serial-bridge-application-for-harmony-3"><h3 class="title topictitle3" id="ariaid-title7" style="">Serial Bridge Application for Harmony 3</h3><div class="body"><ul class="ul"><li class="li"><p class="p">Open MPLAB</p>
</li>
<li class="li"><p class="p">Go to File Menu and select Open Project</p>
</li>
<li class="li with-image"><p class="p">In the next window, select the Serial bridge project from  {local system path}\wireless_wifi\apps\serial_bridge\firmware and click <strong class="ph b">Open Project</strong></p>
<br /><img class="image" src="GUID-67FF166F-F65C-4D71-AF10-9618DA058C4F-low.png" alt="open_project" /><br /></li>
<li class="li"><p class="p">Build the project</p>
</li>
<li class="li with-image"><p class="p">The click <strong class="ph b">Make and Program Device</strong> button.</p>
<br /><img class="image" src="GUID-A9B6B3B5-B404-49AD-ABAC-FE937BC93131-low.png" alt="make_n_program_device" /><br /></li>
</ul>
</div>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title8" id="hardware-setup-1"><h3 class="title topictitle3" id="ariaid-title8" style="">Hardware Setup</h3><div class="body"><ul class="ul"><li class="li"><p class="p">Power On Sequence</p>
<ul class="ul"><li class="li"><p class="p">To perform a serial flash download using the ATWINC1500 built-in UART, it is mandatory that the ATWINC1500 chip is in the right bootloader state.</p>
</li>
<li class="li"><p class="p">To do so, the HostMCU must power up the ATWINC1500 chip and then perform the reset sequence as defined in the ATWINC1500 datasheet</p>
</li>
</ul>
</li>
<li class="li"><p class="p">UART Pin Assignment</p>
<ul class="ul"><li class="li"><p class="p">Pin assignment of WINC1500 module UART are described in the following table.</p>
</li>
<li class="li"><p class="p">On ATWINC1500 Xplained Pro, TX and RX are available on through holes labeled “DEBUG_UART” for easy identification.</p>
</li>
</ul>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e212"><span>ATWINC1500 module pin name</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e214"><span>ATWINC1500 Xplained Pro pin name</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e216"><span>Function</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e212 "><span>J14</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e214 "><span>UART_TX</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e216 "><span>TXD</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e212 "><span>J19</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e214 "><span>UART_RXD</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e216 "><span>RXD</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e212 d10406e214 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
<p class="p">Ensure that the HostMCU is powered up and ATWINC1500 built-in UART is connected to PC via a serial to USB converter.</p>
</li>
</ul>
</div>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title9" id="hardware-setup-for-sama5d27-with-winc3400-wifi-8-click-board"><h3 class="title topictitle3" id="ariaid-title9" style="">Hardware setup for SAMA5D27 with WINC3400 WiFi 8 Click board</h3><div class="body"><ul class="ul"><li class="li"><p class="p">Install JLink Program / Debug utility from Segger (https://www.segger.com/downloads/jlink/) for SOM1-Ek1 board JLink Debugger / Programmer</p>
</li>
<li class="li"><p class="p">Connect the WINC3400 WiFi 8 Click board to the MBus1 connector.</p>
</li>
<li class="li with-image"><p class="p">Connect the USB port (J10) on SOM1-Ek1 board to the computer using micro USB cable.</p>
<br /><img class="image" src="GUID-6F91953F-D471-411E-841A-B5688A7528CD-low.png" /><br /></li>
</ul>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title10" id="general-information-on-firmware-update"><h2 class="title topictitle2" id="ariaid-title10" style="">General Information on Firmware Update</h2><div class="body"><p class="p">The firmware upgrade tool for the WINC devices contains,</p>
<ul class="ul"><li class="li"><p class="p">Scripts</p>
</li>
<li class="li"><p class="p">Binary Tools</p>
</li>
</ul>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title11" id="scripts"><h3 class="title topictitle3" id="ariaid-title11" style="">Scripts</h3><div class="body"><p class="p">The "winc" folder in <strong class="ph b">{local system path}\wireless_wifi\utilities\wifi</strong> path contains the following two scripts.</p>
<ul class="ul"><li class="li"><p class="p">winc_flash_tool.cmd</p>
<p class="p">This script is for the firmware upgrade in Windows and it uses the "image_tool" and "winc_programmer_uart/i2c" to build and program the firmware binary image to the WINC devices.</p>
<ul class="ul"><li class="li"><p class="p">winc_flash_tool.cmd Usage</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e290"><span>Usage</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e292"><span>Command Example</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>To erase the entire flash</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /e</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>To create and program the Firmware Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /e /x /i prog /w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>To create and program the All-in-one(AIO) Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /e /x /i aio /w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>To create OTA Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /i ota</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>Writing to "Root certificate" region</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /i root /w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>Writing to "HTTP files" region</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /i http /w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e290 "><span>To read the entire flash</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e292 "><span>winc_flash_tool.cmd /p COM3 /d WINC3400 /v 1.4.3 /r</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e290 d10406e292 "><span> </span></td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e338"><span>Arguments</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e340"><span>Details</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/p</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Serial port for UART mode</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/d</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>WINC device type</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/s</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Aardvark serial number</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/v</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Firmware version number</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/e</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Erase entire device before programming</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Read XO offset before creating programming image</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/i</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Image type:prog    - Programmer format, aio     - All in one image, raw binary, ota - OTA, root - Root certificates in programmer format, http    - HTTP files in programmer format</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/w</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Write to device</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/f</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Filename of image file to create</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e338 "><span>/r</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e340 "><span>Read entire flash from device</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e338 d10406e340 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title12" id="commands-logs"><h4 class="title topictitle4" id="ariaid-title12" style="">Commands Logs</h4><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Create and program the Firmware Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /i ota</p>
<br /><img class="image" src="GUID-810F0F5D-F32C-4E29-AD93-03AD233C05B7-low.png" alt="firmware_upgrade" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">To create and program the All-in-one(AIO) Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /e /x /i aio /w</p>
<br /><img class="image" src="GUID-CE377F44-CE6D-4CA5-8D30-E973CC5BBC00-low.png" alt="firmware_aio" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">To create OTA Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /i ota</p>
<br /><img class="image" src="GUID-A422617F-9513-4EE7-A37E-20D4B92EAB46-low.png" alt="ota_image" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Writing to "Root certificate" region</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /i root /w</p>
<br /><img class="image" src="GUID-F72765B9-770E-48D3-8948-E900515A4169-low.png" alt="root_certificate" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">Writing to "HTTP files" region</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /i http /w</p>
<br /><img class="image" src="GUID-D37EB051-837E-4FE1-81B3-688ECF612371-low.png" alt="http_file" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">6.</span><p class="p">To read the entire flash</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_flash_tool.cmd /p COM3 /d winc3400 /v 1.4.3 /r</p>
<br /><img class="image" src="GUID-7912EEEF-109B-4B2F-811C-22B0A67F388D-low.png" alt="read_flash" /><br /></li>
</ul>
</li>
</ol>
<ul class="ul"><li class="li"><p class="p">winc_flash_tool.sh</p>
<p class="p">This script is for the firmware upgrade in Linux and it uses the "image_tool" and "winc_programmer_uart/i2c" to build and program the firmware binary image to the WINC devices.</p>
<ul class="ul"><li class="li"><p class="p">winc_flash_tool.sh Usage</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e488"><span>Usage</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e490"><span>Command Example</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>To erase the entire flash</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -e</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>To create and program the Firmware Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -e -x -i prog -w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>To create and program the All-in-one(AIO) Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -e -x i aio -w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>To create OTA Image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -i ota</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>Writing to "Root certificate" region</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -i root -w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>Writing to "HTTP files" region</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -i http -w</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e488 "><span>To read the entire flash</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e490 "><span>winc_flash_tool.sh -p TTYS0 -d WINC3400 -v 1.4.3 -r</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e488 d10406e490 "><span> </span></td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e536"><span>Arguments</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e538"><span>Details</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-p</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Serial port for UART mode</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-d</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>WINC device type</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-s</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Aardvark serial number</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-v</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Firmware version number</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-e</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Erase entire device before programming</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Read XO offset before creating programming image</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-i</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Image type:prog    - Programmer format, aio - All in one image, raw binary, ota- OTA, root- Root certificates in programmer format, http - HTTP files in programmer format</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-w</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Write to device</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-f</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Filename of image file to create</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e536 "><span>-r</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e538 "><span>Read entire flash from device</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e536 d10406e538 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title13" id="atwinc1500atwinc3400-binary-tools"><h3 class="title topictitle3" id="ariaid-title13" style="">ATWINC1500/ATWINC3400 Binary Tools</h3><div class="body"><p class="p">The script files internally use the following tools to build and program the image.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">image_tool - Builds firmware binary image</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">winc_programmer_uart/i2c – Program the built firmware binary image to the WINC device using UART or I2C interface.</p>
</li>
</ol>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title14" id="building-firmware-image"><h4 class="title topictitle4" id="ariaid-title14" style="">Building Firmware Image</h4><div class="body"><ul class="ul"><li class="li"><p class="p">image_tool located in <strong class="ph b">{local system path}\wireless_wifi\utilities\wifi\winc\tools</strong> is used to build binary images for ATWINC devices.</p>
</li>
<li class="li"><p class="p">It collects all the binaries for each section and combine it in to one firmware called wincXXXX_X.X.X.bin.</p>
</li>
<li class="li"><p class="p">The image_tool arrange the section according to the flash memory orgianization of ATWINC1500/ATWINC3400</p>
</li>
<li class="li"><p class="p">The image_tool collects the information from the flash_image XML file.</p>
</li>
<li class="li"><p class="p">Refer flash_image.config XML for how the flash memory is divided.</p>
</li>
<li class="li"><p class="p">User needs to update the flash_image.config for updating the root certificate or adding custom provisioning pages</p>
</li>
<li class="li"><p class="p">The configuration XML file(flash_image.config) can be found under <strong class="ph b">{local system path}wireless_wifi\utilities\wifi\winc\files\wincXXXX\X.X.X</strong> directory</p>
</li>
</ul>
</div>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title15" id="image-tool-usage"><h4 class="title topictitle4" id="ariaid-title15" style="">image_tool Usage</h4><div class="body">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e648"><span>Usage</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e650"><span>Command Example</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e648 "><span>To create firmware image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e650 "><span>image_tool.exe -c 1.4.3\flash_image.config -c gain_tables\gain.config -o winc3400_1.4.3.bin -of prog</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e648 "><span>Writing to a specific region(eg: Root certificate)</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e650 "><span>image_tool.exe -c 1.4.3\flash_image.config -c gain_tables\gain.config winc3400_1.4.3.bin -of prog -r “root certificates"</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e648 "><span>To create OTA firmware image</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e650 "><span>image_tool.exe -c 1.4.3\flash_image.config -o winc3400_1.4.3.bin -of winc_ota -s ota</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e648 d10406e650 "><span> </span></td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e676"><span>Arguments</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e678"><span>Details</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e676 "><span>-c</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e678 "><span>Configuration files Microchip recommends to use the default configuration files which is flash_image.config</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e676 "><span>-o</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e678 "><span>Output name of the binary image files ATWINC1500: winc1500_X.X.X.bin, ATWINC3400: winc3400_X.X.X.bin</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e676 "><span>-of</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e678 "><span>The image_tool supports 4 output formats :  raw - Raw binary image, winc_ota - WINC OTA format, prog - Format suitable for programming., log - Textual log information</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e676 "><span>-r</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e678 "><span>Specifies a region to process. More than one region can be specified with repeated use of this option. If used only the regions specified will be processed.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e676 d10406e678 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
<p class="p">For more information, enter image_tool help command:image_tool -h</p>
</div>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title16" id="commands-logs-1"><h4 class="title topictitle4" id="ariaid-title16" style="">Commands Logs</h4><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Creating Firmware Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">image_tool.exe -c 1.4.3\flash_image.config -c gain_tables\gain.config -o winc3400_1.4.3.bin -of prog</p>
<br /><img class="image" src="GUID-925365EB-526B-4143-B9B4-71658BA919E0-low.png" alt="imagetool_1" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Writing to a Specific Region</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">image_tool.exe -c 1.4.3\flash_image.config -c gain_tables\gain.config winc3400_1.4.3.bin -of prog -r “root certificates"</p>
<br /><img class="image" src="GUID-FE92D119-F06D-44DB-8C16-80FB82816133-low.png" alt="imagetool_2" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Creating OTA Firmware Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">image_tool.exe -c 1.4.3\flash_image.config -o winc3400_1.4.3.bin -of winc_ota -s ota</p>
<br /><img class="image" src="GUID-6EFCB5F8-C6F9-4A7C-812F-2C369D355BBA-low.png" alt="imagetool_3" /><br /></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title17" id="programming-firmware-image"><h4 class="title topictitle4" id="ariaid-title17" style="">Programming Firmware Image</h4><div class="body"><p class="p">winc_programmer_uart/i2c tool located in src/firmware/firmware is used to program the binary images for ATWINC1500/ATWINC3400 devices using UART or I2C interface. it does the following primary jobs:</p>
<ul class="ul"><li class="li"><p class="p">Erase the ATWINC1500/ATWINC3400 memory</p>
</li>
<li class="li"><p class="p">Read the firmware from ATWINC1500/ATWINC3400</p>
</li>
<li class="li"><p class="p">Write the firmware to ATWINC1500/ATWINC3400</p>
</li>
<li class="li"><p class="p">Verify the written firmware.</p>
</li>
</ul>
</div>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title18" id="winc-programmer-uart-tool-usage"><h4 class="title topictitle4" id="ariaid-title18" style="">winc_programmer_uart Tool Usage</h4><div class="body">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e775"><span>Usage</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e777"><span>Command Example</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e775 "><span>Erase ATWINC1500/ATWINC3400 flash memory</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e777 "><span>winc_programmer_uart.exe -p COM16 -d winc3400 -e -pfw 1.4.3\firmware\programmer_firmware.bin</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e775 "><span>Write the created binary image to ATWINC1500/ATWINC3400 flash memory</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e777 "><span>winc_programmer_uart.exe -p COM16 -d winc3400 -i winc3400_1.4.3.bin -if prog -w -pfw 1.4.3\firmware\programmer_firmware.bin</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e775 "><span>Verify the written image in ATWINC1500/ATWINC3400 device</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e777 "><span>winc_programmer_uart.exe -p COM16 -d winc3400 -i winc3400_1.4.3.bin -if prog -r -pfw 1.4.3\firmware\programmer_firmware.bin</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e775 "><span>Single command (including all the above operations)</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e777 "><span>winc_programmer_UART.exe -p COM16 -d winc3400 -e -i winc3400_1.4.3.bin -if prog -w -r -pfw 1.4.3\firmware\programmer_firmware.bin</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e775 d10406e777 "><span> </span></td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e808"><span>Arguments</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d10406e810"><span>Details</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-p</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>Port number of the connected HostMCU COM Port Command to find the Port number: test_edbg</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-d</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>ATWINC device: winc1500 or winc3400</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-e</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>To erase the ATWINC1500/ATWINC3400 device flash memory before writing the firmware image</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-w</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>To write the firmware image</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-r</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>To read the firmware image</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-if</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>Input format. winc_ota - WINC OTA format, raw - A raw binary image, prog - Format suitable for programming.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e808 "><span>-pfw</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d10406e810 "><span>programming firmware : WINC firmware used to program the device.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d10406e808 d10406e810 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
<p class="p">For more information enter winc_programmer_uart help command:</p>
<p class="p"><em class="ph i">winc_programmer_uart.exe -h</em></p>
</div>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title19" id="commands-logs-2"><h4 class="title topictitle4" id="ariaid-title19" style="">Commands logs</h4><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Erase WINC memory</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_programmer_uart.exe -p COM3 -d winc3400 -e -pfw 1.4.3\firmware\programmer_firmware.bin</p>
<br /><img class="image" src="GUID-9D08DD23-C1F1-49E4-982B-27B053F27C6B-low.png" alt="erase" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Write Firmware Image to WINC</p>
<ul class="ul"><li class="li"><p class="p">Note: Before executing this command, user should create the firmware image of required version (winc3400_version.prog) using image_tool.</p>
</li>
<li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_programmer_uart.exe -p COM3 -d winc3400 -i winc3400_1.4.3.prog -if prog -w -pfw 1.4.3\firmware\programmer_firmware.bin</p>
<br /><img class="image" src="GUID-39898EEC-B986-4517-842B-46BBC107A3A5-low.png" alt="write_firmware" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Read Firmware Image from WINC memory</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the Command:</p>
<p class="p">winc_programmer_uart.exe -p COM3 -d winc3400 -r -pfw 1.4.3\firmware\programmer_firmware.bin</p>
<br /><img class="image" src="GUID-6CAFCEE4-510D-437D-8D9F-E3CCE2FF6AFC-low.png" alt="read_firmware" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Verify the Written Image</p>
<ul class="ul"><li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_programmer_uart.exe -p COM3 -d winc3400 -i winc3400_1.4.3.prog -if prog -r -pfw 1.4.3\firmware\programmer_firmware.bin</p>
<br /><img class="image" src="GUID-1DE9138E-2C6D-450D-8EDB-897218CAE64C-low.png" alt="verify" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">Consolidated Single Command : This command does all the above operations in a single command.</p>
<ul class="ul"><li class="li"><p class="p">Note: Before executing this command, user should create the firmware image of required version (winc3400_version.prog) using image_tool.</p>
</li>
<li class="li with-image"><p class="p">Expected output log for the command:</p>
<p class="p">winc_programmer_UART.exe -p COM3 -d winc3400 -e -i winc3400_1.4.3.prog -if prog -w -r -pfw 1.4.3\firmware\programmer_firmware.bin</p>
<br /><img class="image" src="GUID-AD6C9C0C-E6B9-4DF6-8C49-6EE635B0D111-low.png" alt="consolidated" /><br /></li>
</ul>
</li>
</ol>
</div>
</div>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title20" id="download-failure-troubleshooting"><h3 class="title topictitle3" id="ariaid-title20" style="">Download Failure Troubleshooting</h3><div class="body"><p class="p">Here are the troubleshooting tips for a specific error while downloading using batch script.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">The script Failed To Find Any COM Port
The winc_programmer_uart.exe expects a COM port as an argument. If the expected COM port is not found, then it will provide the below error.</p>
<br /><img class="image" src="GUID-4CDD4FAC-8551-4A56-BD94-7BD22C4D362A-low.png" alt="com_port_failed" /><br /><p class="p"><strong class="ph b">How to fix it:</strong></p>
<ul class="ul"><li class="li"><p class="p">Make sure ATWINC1500/ATWINC3400 COM port is listed in the device manager.</p>
</li>
<li class="li"><p class="p">Make sure ATWINC1500/ATWINC3400 COM port is not opened by any other application. For verification, try to open and close the COM port with a terminal application.</p>
</li>
<li class="li"><p class="p">low quality USB cable or low quality serial to USB converter (built-in UART) can introduce garbage on the UART line thus failing the detection of the ATWINC1500/ATWINC3400 COM port. Try a different cable.</p>
</li>
<li class="li"><p class="p">When performing a “built-in UART download”, it is expected that the ATWINC1500/ATWINC3400 bootloader is in a particular state that can only be achieved after doing a clean power up and reset sequence. Hence, before doing a download always ensure that a clean power up and reset sequence has been made.</p>
</li>
<li class="li"><p class="p">Make sure that no other extension board (ex: IO1…) is connected to the Xplained Pro board while performing the download.</p>
</li>
<li class="li"><p class="p">Make sure the project path is not exceeding Windows maximum 260 characters path length.</p>
</li>
</ul>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Failed To Initialize Programmer: Invalid Chip ID</p>
<p class="p">The Failed to initialize programmer with Invalid chip ID error typically happens when there is garbage or noise on the UART line preventing from reading the correct chip ID value. How to fix it:</p>
<ul class="ul"><li class="li"><p class="p">Try connecting the PC and the ATWINC1500/ATWINC3400 with a different cable. A clean power up and reset sequence of the ATWINC1500/ATWINC3400 is necessary to start over with the ATWINC1500/ATWINC3400 bootloader in the appropriate state.</p>
</li>
</ul>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Failed To Initialize Programmer: Waiting For Chip Permission</p>
<p class="p">After printing the correct chip ID of the ATWINC1500/ATWINC3400, the winc_programmer_UART tool programs a small binary (programmer firmware) to assist with ATWINC1500/ATWINC3400 flash programming. At this stage the winc_programmer_UART will change the UART baud rate from 115200 to 500000 to speed up the actual transfer of the firmware image. Once the baud rate change is made, the chip permission is verified to ensure the UART connection is reliable. Failing at this stage means that the current setup does not support such a high baud rate.
How to fix it:</p>
<ul class="ul"><li class="li"><p class="p">It is recommended to try connecting the PC and the ATWINC1500/ATWINC3400 with a different cable. Also a clean power up and reset sequence of the ATWINC1500/ATWINC3400 is necessary to start over with the ATWINC1500/ATWINC3400 bootloader in the appropriate state.</p>
</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</body>
</html>