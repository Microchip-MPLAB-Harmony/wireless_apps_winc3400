<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="MQTT Demo" />
<meta name="DC.relation" scheme="URI" content="GUID-E5D04EAD-51D1-4D47-8ADB-9AD8BB1A700C.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="mqtt-demo" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>MQTT Demo</title>
<meta name="Microsoft.Help.Id" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2-mqtt-demo" />
<meta name="Microsoft.Help.TocParent" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony WINC3400 Wireless Applications Reference A 12/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-49316BE3-AC2F-4E11-AE94-1E35E949F3B2"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="mqtt-demo">
<h1 class="title topictitle1" id="ariaid-title1" style="">MQTT Demo</h1><div class="body"><p class="p">This application demonstrates how a user run a MQTT Client using third party Paho software on WINC3400 device. The user would need to use "MQTT.fx" third party Mqtt Client application to receive message posted by MQTT Client running on WINC3400 device once it connects to the MQTT server.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Download the MQTT.fx Third Party Mqtt Client Application and open it on Laptop.</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Connect the MQTT.fx Application to the MQTT Server - mqtt.eclipseprojects.io with port 1883.</p>
<br /><img class="image" src="GUID-99966D24-0FD1-44E3-A80B-67FA4FE0BF80-low.png" alt="mqtt_bypass_fx1" /><br /></li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Make the MQTT.fx Application susbcribe to Topic "MQTT_NET_Client topic".</p>
<br /><img class="image" src="GUID-A05348DC-54FD-44AF-8795-2EAC4A5E1233-low.png" alt="mqtt_bypass_fx2" /><br /></li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Configure the wifi parameters using "wifi set" command.</p>
<br /><img class="image" src="GUID-14D8581E-DB15-4EA0-BA9F-60DA50E90A30-low.png" alt="mqtt_bypass_wifi_set" /><br /></li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">Enter the command "mqtt start".</p>
<br /><img class="image" src="GUID-9FBE3CD0-F250-4278-9E01-6E940FB9627C-low.png" alt="mqtt_bypass_start" /><br /></li>
<li class="li"><span class="indent-level-default">6.</span><p class="p">Enter the command "appdemo start 1 18". The device will connect to the network and IP address will be displayed on the terminal window.</p>
<br /><img class="image" src="GUID-0A25B9C8-C5AB-4D28-A1A3-5DFE53C03FFE-low.png" alt="mqtt_bypass_ap_connected" /><br /></li>
<li class="li"><span class="indent-level-default">7.</span><p class="p">The MQTT Client on the WINC3400 device shall connect to the MQTT Server - mqtt.eclipseprojects.io.</p>
<br /><img class="image" src="GUID-D221FA97-BCEB-4F6C-8C5D-CEC0119D19EB-low.png" alt="mqtt_bypass_client_connected" /><br /></li>
<li class="li"><span class="indent-level-default">8.</span><p class="p">After connecting to MQTT Server, the MQTT Client on the WINC3400 device shall subscribe to Topic "MQTT_NET_Client topic".</p>
<br /><img class="image" src="GUID-93A61FD4-2F16-41F3-835C-00E95FE7B471-low.png" alt="mqtt_bypass_subscribed" /><br /></li>
<li class="li"><span class="indent-level-default">9.</span><p class="p">The MQTT Client on the WINC3400 device shall publish the message "MQTT NET Demo Test Message" to Topic "MQTT_NET_Client topic".</p>
<br /><img class="image" src="GUID-A295016C-7677-453A-9AE5-F88F9CE49D90-low.png" alt="mqtt_bypass_published" /><br /></li>
<li class="li"><span class="indent-level-default">10.</span><p class="p">MQTT.fx Application receives the message "MQTT NET Demo Test Message" on the Topic "MQTT_NET_Client topic" sent by the MQTT Client running on the WINC3400.</p>
<br /><img class="image" src="GUID-5F83A00F-F3FF-4F64-96A2-2813796DEE6C-low.png" alt="mqtt_bypass_fx3" /><br /></li>
<li class="li"><span class="indent-level-default">11.</span><p class="p">The message "MQTT NET Demo Test Message" will be published from MQTT.fx Application. Since it is subcribing to the same topic "MQTT_NET_Client topic". The MQTT demo will exit after publishing the message.</p>
<br /><img class="image" src="GUID-87B96E95-2CE0-404C-92A2-8848A21CF427-low.png" alt="mqtt_bypass_completed" /><br /></li>
</ol>
<p class="p"><strong class="ph b">NOTE:</strong></p>
<p class="p">Sometimes the MQTT demo will give connection error, if the default broker <strong class="ph b">mqtt.eclipseprojects.io</strong> is down. If so try the demo with this broker : <strong class="ph b">broker.hivemq.com</strong></p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-E5D04EAD-51D1-4D47-8ADB-9AD8BB1A700C.html">WINC3400 Bypass Mode Demo Applications</a></div>
</div>
</div></body>
</html>