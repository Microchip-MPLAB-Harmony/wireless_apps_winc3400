<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Wi-Fi provisioning using BLE" />
<meta name="DC.relation" scheme="URI" content="GUID-B02CCF0F-B40C-487D-8D4D-570EFA78D2BF.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="wi-fi-provisioning-using-ble" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Wi-Fi provisioning using BLE</title>
<meta name="Microsoft.Help.Id" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2-wi-fi-provisioning-using-ble" />
<meta name="Microsoft.Help.TocParent" content="GUID-AD5B776E-19C6-49CD-A7CF-B692D58694C2" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony WINC3400 Wireless Applications Reference A 05/2023" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-213DA604-1749-4752-B6F7-73600BA8F232"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="wi-fi-provisioning-using-ble">
<h1 class="title topictitle1" id="ariaid-title1" style="">Wi-Fi provisioning using BLE</h1><div class="body"><p class="p">This example demonstrates how to pass the AP credentials to WINC3400 device via BLE.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-B02CCF0F-B40C-487D-8D4D-570EFA78D2BF.html">Harmony 3 Wireless application examples for WINC3400</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="description"><h2 class="title topictitle2" id="ariaid-title2" style="">Description</h2><div class="body"><p class="p">This application demonstrates how a user can pass the target AP credentials to WINC3400 device via BLE. The user would need to use "Microchip Bluetooth Data" mobile application to pass the AP credentials to WINC3400 after pairing with the mobile.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="downloading-and-building-the-application"><h2 class="title topictitle2" id="ariaid-title3" style="">Downloading and building the application</h2><div class="body"><p class="p">To download or clone this application from Github, go to the <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_apps_winc3400" target="_blank">top level of the repository</a></p>
<p class="p">Path of the application within the repository is <strong class="ph b">apps/wifi_provision_via_ble/firmware</strong> .</p>
<p class="p">To build the application, refer to the following table and open the project using its IDE.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d22515e47"><span>Project Name</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d22515e49"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d22515e47 "><span>sam_e54_xpro_winc3400.X</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d22515e49 "><span>MPLABX project for SAME54 and WINC3400 Xplained pro</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d22515e47 "><span>sam_d21_xpro_winc3400.X</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d22515e49 "><span>MPLABX project for SAMD21 and WINC3400 Xplained pro</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d22515e47 d22515e49 "><span>Â </span></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="setting-up-samxxx-xplained-pro-board"><h2 class="title topictitle2" id="ariaid-title4" style="">Setting up SAMXXX Xplained Pro board</h2><div class="body"><ul class="ul"><li class="li"><p class="p">Connect the Debug USB port on the SAMEXXX Xplained Pro board to the computer using a micro USB cable</p>
</li>
</ul>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="running-the-application"><h2 class="title topictitle2" id="ariaid-title5" style="">Running the Application</h2><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Build and program the application project using its respective IDE</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Open the Terminal application (Ex.:Tera term) on the computer</p>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Connect to the "USB to UART" COM port and configure the serial settings as follows:</p>
<ul class="ul"><li class="li"><p class="p">Baud : 115200</p>
</li>
<li class="li"><p class="p">Data : 8 Bits</p>
</li>
<li class="li"><p class="p">Parity : None</p>
</li>
<li class="li"><p class="p">Stop : 1 Bit</p>
</li>
<li class="li"><p class="p">Flow Control : None</p>
</li>
</ul>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Download the Microchip Bluetooth Data application from App Store and open it.</p>
</li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">The WINC3400 device will scan the APs and ready to get paired with Mobile application.</p>
<br /><img class="image" src="GUID-E1636831-7B1D-4CB3-A619-F360C3059905-low.png" alt="ble_scan" /><br /></li>
<li class="li"><span class="indent-level-default">6.</span><p class="p">In the Mobile Application, Open the "Ble provisioner" widget.</p>
<br /><img class="image" src="GUID-38796A44-D45A-4AC9-96A8-2B475F02C1CB-low.jpg" alt="wifi_prov_widget" /><br /></li>
<li class="li"><span class="indent-level-default">7.</span><p class="p">In the "Ble provisioner" widget, press the "scan" button. It will list the surrounding BLE devices.</p>
<br /><img class="image" src="GUID-E1623A3D-8D15-4E78-94BD-BBE0C3CC161A-low.jpg" alt="scan" /><br /></li>
<li class="li"><span class="indent-level-default">8.</span><p class="p">The default name given for WINC3400 in the "Wi-Fi provisioning using BLE" application is "Wifi Prov". Click on "Wifi Prov" device.</p>
<br /><img class="image" src="GUID-745696CC-257C-4410-ACB9-97172B87E96E-low.jpg" alt="select_device" /><br /></li>
<li class="li"><span class="indent-level-default">9.</span><p class="p">The next screen will display the scanned AP list.</p>
<br /><img class="image" src="GUID-569499C9-0752-4774-A413-AB76EDA56F93-low.jpg" alt="provisioning" /><br /></li>
<li class="li"><span class="indent-level-default">10.</span><p class="p">Select the desired AP from the scan list and provide the required credentials to make Wi-Fi connection.</p>
</li>
<li class="li"><span class="indent-level-default">11.</span><p class="p">Press "Provision" button</p>
</li>
<li class="li"><span class="indent-level-default">12.</span><p class="p">The mobile application will ask for the password to pair.</p>
</li>
<li class="li"><span class="indent-level-default">13.</span><p class="p">The password is stored in the "pincode" variable in the "wifi_prov.c" file.</p>
</li>
<li class="li"><span class="indent-level-default">14.</span><p class="p">Enter the password to pair the WINC3400 device with mobile.</p>
<br /><img class="image" src="GUID-E7DC885E-EC71-4806-AC07-41DDCDE60416-low.jpg" alt="pairing" /><br /></li>
<li class="li"><span class="indent-level-default">15.</span><p class="p">The device will connect to the AP and print the IP address obtained.</p>
<br /><img class="image" src="GUID-ADA9232A-58EE-4CAE-868B-7E01948C1DE9-low.png" alt="ble_provisoing_full_log" /><br /></li>
</ol>
</div>
</div>
</body>
</html>