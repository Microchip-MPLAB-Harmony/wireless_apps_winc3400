<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Example project creation - WINC3400+SAME54 Socket mode | Harmony 3 Wireless application examples for WINC3400</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Example project creation - WINC3400+SAME54 Socket mode" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Wireless application examples for WINC3400" /> <meta property="og:description" content="Harmony 3 Wireless application examples for WINC3400" /> <link rel="canonical" href="../../apps/wifi_socket_demos/winc_same54_socketmode_from_scratch.html" /> <meta property="og:url" content="../../apps/wifi_socket_demos/winc_same54_socketmode_from_scratch.html" /> <meta property="og:site_name" content="Harmony 3 Wireless application examples for WINC3400" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Example project creation - WINC3400+SAME54 Socket mode" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","url":"../../apps/wifi_socket_demos/winc_same54_socketmode_from_scratch.html","headline":"Example project creation - WINC3400+SAME54 Socket mode","description":"Harmony 3 Wireless application examples for WINC3400","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../" class="nav-list-link">Harmony 3 Wireless application examples for WINC3400</a><ul class="nav-list "><li class="nav-list-item "><a href="../../apps/getting_started/create_winc_project_from_scratch.html" class="nav-list-link">Create WINC Project - Getting Started</a></li><li class="nav-list-item "><a href="../../apps/getting_started/winc_supported_modes.html" class="nav-list-link">Supported Network Modes in WINC</a></li><li class="nav-list-item "><a href="../../apps/ap_scan/readme.html" class="nav-list-link">AP Scan</a></li><li class="nav-list-item "><a href="../../apps/wifi_winc_sta_bypass/readme.html" class="nav-list-link">STA Bypass mode</a></li><li class="nav-list-item "><a href="../../apps/power_save_mode_example/readme.html" class="nav-list-link">Power Save Mode</a></li><li class="nav-list-item "><a href="../../apps/tcp_client/readme.html" class="nav-list-link">TCP Client</a></li><li class="nav-list-item "><a href="../../apps/wifi_tcp_server_in_softap/readme.html" class="nav-list-link">TCP Server in SoftAP</a></li><li class="nav-list-item "><a href="../../apps/wifi_socket_demos/readme.html" class="nav-list-link">Wi-Fi Socket Mode Demos</a></li><li class="nav-list-item "><a href="../../apps/wifi_bypass_demos/readme.html" class="nav-list-link">Wi-Fi Bypass Mode Demos</a></li><li class="nav-list-item "><a href="../../apps/wifi_provisioning_via_wps/readme.html" class="nav-list-link">Wifi Provisioning via WPS</a></li><li class="nav-list-item "><a href="../../apps/wifi_provision_via_ble/readme.html" class="nav-list-link">Wi-Fi provisioning using BLE</a></li><li class="nav-list-item "><a href="../../apps/wifi_provisioning_via_softap/readme.html" class="nav-list-link">Wifi Provisioning via SoftAP</a></li><li class="nav-list-item active"><a href="../../apps/wifi_socket_demos/winc_same54_socketmode_from_scratch.html" class="nav-list-link active">Example project creation - WINC3400+SAME54 Socket mode</a></li><li class="nav-list-item "><a href="../../apps/wifi_bypass_demos/winc3400_same54_bypassmode_from_scratch.html" class="nav-list-link">Example project creation - WINC3400+SAME54 Bypass mode</a></li><li class="nav-list-item "><a href="../../apps/getting_started/winc_firmware_upgrade.html" class="nav-list-link">Firmware Upgrade of WINC Devices</a></li><li class="nav-list-item "><a href="../../apps/wifi_socket_demos/winc_samd21_socketmode_from_scratch.html" class="nav-list-link">Example project creation - WINC3400+SAMD21 Socket mode</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 Wireless application examples for WINC3400" aria-label="Search Harmony 3 Wireless application examples for WINC3400" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../">Harmony 3 Wireless application examples for WINC3400</a></li> <li class="breadcrumb-nav-list-item"><span>Example project creation - WINC3400+SAME54 Socket mode</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="example-project-creation---winc-socket-mode-project-with-same54"> <a href="#example-project-creation---winc-socket-mode-project-with-same54" aria-labelledby="example-project-creation---winc-socket-mode-project-with-same54" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example project creation - WINC Socket mode project with SAME54 </h1> <p>This document explains a step by step approach to create a WINC Socket mode project with SAME54 host.</p> <h2 id="hardware-setup"> <a href="#hardware-setup" aria-labelledby="hardware-setup" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Setup </h2> <p>The document demonstrates the creation of a demo on the SAM E54 Xplained Pro board with the ATWINC1500 XPRO board.</p> <p>The SAME54 Xplained PRO contains a built-in programmer-debugger tool called Embedded Debugger (EDBG) which is used in this tutorial.</p> <p>Following image shows the hardware setup.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_57.png" alt="" /></p> <h2 id="steps-to-create-the-new-example-project"> <a href="#steps-to-create-the-new-example-project" aria-labelledby="steps-to-create-the-new-example-project" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Steps to create the new example project </h2> <p>Follow the below mwntioned steps to create the new WINC project in socket mode with SAME54 from scratch.</p> <h2 id="project-creation"> <a href="#project-creation" aria-labelledby="project-creation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project Creation </h2> <ul> <li>Open MP Lab</li> <li> <p>Go to File Menu and select New Project…</p> <p><img src="../../apps/wifi_socket_demos/images/same54_1.png" alt="" /></p> </li> </ul> <h3 id="project-selection"> <a href="#project-selection" aria-labelledby="project-selection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project Selection </h3> <ul> <li> <p>Under the Projects section, select 32bit MPLAB Harmony3 Project and click on Next.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_2.png" alt="" /></p> </li> </ul> <h3 id="framework-selection"> <a href="#framework-selection" aria-labelledby="framework-selection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Framework Selection </h3> <ul> <li> <p>Enter the local system path where the packages are downloaded click Next.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_3.png" alt="" /></p> </li> </ul> <h3 id="project-settings"> <a href="#project-settings" aria-labelledby="project-settings" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project Settings </h3> <ul> <li>Under {local system H3 path}\wireless_apps_winc1500\apps, create a folder name for the project (Ex: sample_project).</li> <li>Enter the full path including the newly created project folder.</li> <li> <p>Enter the Folder name and Project name and click on Next (To know about “Folder” and “Name” please click “Show visual Help” button).</p> <p><img src="../../apps/wifi_socket_demos/images/same54_4.png" alt="" /></p> </li> </ul> <h3 id="configuration-settings"> <a href="#configuration-settings" aria-labelledby="configuration-settings" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration Settings </h3> <ul> <li>Enter a <strong>Name</strong> for the config setting folder</li> <li>select the <strong>Target device</strong> name</li> <li> <p>Click <strong>Finish</strong>.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_5.png" alt="" /></p> </li> <li> <p>Click <strong>Launch</strong> once <strong>Configuration Database Setup</strong> windows pops up.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_6.png" alt="" /></p> </li> </ul> <p>MHC window and has three panes.</p> <ol> <li>Available components: <br /> It lists all the components from downloaded packages.</li> <li>Project Graph.<br /> It is where the user adds components from Available components</li> <li> <p>Configuration options. <br /> Each component in project graph can be configured using Configuration options.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_7.png" alt="" /></p> </li> </ol> <h3 id="adding-components-in-mh3"> <a href="#adding-components-in-mh3" aria-labelledby="adding-components-in-mh3" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding components in MH3 </h3> <p>User should select required components for creating WINC project.</p> <h3 id="core"> <a href="#core" aria-labelledby="core" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Core </h3> <p>The first component to enable is Core because core is the base component for many drivers and system components.</p> <ul> <li>Go to Harmony in the Available components</li> <li> <p>Select core.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_8.png" alt="" /></p> </li> <li>Drag and drop it in the <strong>Project Graph</strong>.</li> <li> <p>This will ask permission to activate Free RTOS. Since this project does not require free RTOS, click <strong>No</strong>.</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_9.png" alt="" /></p> </li> <li> <p>Core component appears in the Project Graph as shown below.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_10.png" alt="" /></p> </li> </ul> <h3 id="same54-xplained-pro-component"> <a href="#same54-xplained-pro-component" aria-labelledby="same54-xplained-pro-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SAME54 Xplained pro component </h3> <p>This example uses SAME54 xplained pro board for host development board. Enable component SAM E54 Xplained Pro BSP.</p> <ul> <li>Go to Board Support Packages</li> <li> <p>select SAM E54 Xplained Pro BSP</p> <p><img src="../../apps/wifi_socket_demos/images/same54_11.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_12.png" alt="" /></p> </li> </ul> <h3 id="timer-component"> <a href="#timer-component" aria-labelledby="timer-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Timer component </h3> <p>WINC driver needs driver for its delay functionality and user can select the any timer for this. To enable Timer</p> <ul> <li>Go to <strong>Harmony -&gt; System Services</strong></li> <li> <p>Select <strong>TIME</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_13.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_14.png" alt="" /></p> </li> <li>Right click on <strong>TMR</strong> in the <strong>TIME component</strong></li> <li> <p>Go to Satisfiers and select <strong>TC3</strong> (user can select any timer)</p> <p><img src="../../apps/wifi_socket_demos/images/same54_15.png" alt="" /></p> </li> <li> <p>This adds <strong>TC3</strong> connected with <strong>TIME</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_16.png" alt="" /></p> </li> </ul> <h3 id="eic-component"> <a href="#eic-component" aria-labelledby="eic-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EIC component </h3> <p>WINC device uses interrupt pin PB07. To configure PB07, EIC component must be enabled.</p> <ul> <li>Go to <strong>Peripherals</strong></li> <li> <p>Select <strong>EIC</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_17.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_18.png" alt="" /></p> </li> </ul> <p>Pin PB07 belongs to external interrupt channel 7 so EIC channel 7 has to be enabled and configured.</p> <ul> <li>Select EIC in the Project Graph</li> <li>Please do the following changes in the Configuration Options: <ul> <li>Check Enable <strong>EIC channel4</strong> box and expand <strong>EIC channel7 Configuration</strong></li> <li>Check <strong>Enable Interrupt</strong> box</li> <li>Change <strong>Enable Interrupt7 Edge detection</strong> to <strong>Falling Edge detection</strong></li> </ul> <p><img src="../../apps/wifi_socket_demos/images/same54_19.png" alt="" /></p> </li> </ul> <h3 id="virtual-console"> <a href="#virtual-console" aria-labelledby="virtual-console" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Virtual Console </h3> <p>Virtual Console is used to send debug messages and to receive commands from user. Virtual console uses UART interface for communication.<br /> Host SAME54 uses pins PB24 and PB25 for UART interface to perform receive and transmit operation, respectively. These two pins belong to SERCOM2 of the host SAME54 device.<br /> For more information please refer section 5.4.2 (Virtual COM Port) of <strong><a href="http://ww1.microchip.com/downloads/en/DeviceDoc/70005321A.pdf">SAM E54 Xplained Pro User’s Guide</a></strong><br /></p> <p>To enable and configure Virtual COM port:</p> <ul> <li>Go to <strong>System Services</strong></li> <li> <p>Select <strong>CONSOLE</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_20.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_21.png" alt="" /></p> </li> </ul> <p>UART interface of <strong>SERCOM2</strong> is used by <strong>CONSOLE</strong>.</p> <ul> <li>Right click on the <strong>UART</strong> port of <strong>Instance 0</strong> of the <strong>CONSOLE</strong> component.</li> <li> <p>Go to Satisfiers and select <strong>SERCOM2</strong>.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_22.png" alt="" /></p> </li> </ul> <p><strong>SERCOM2</strong> appears in <strong>Project Graph</strong> connected with <strong>CONSOLE</strong>.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_23.png" alt="" /></p> <p><strong>SERCOM2</strong> uses <strong>PAD[1]</strong> for data reception.</p> <ul> <li> <p>Change the <strong>Receive pinout</strong> property to <strong>SERCOM PAD[1]</strong> in the Configuration Options</p> <p><img src="../../apps/wifi_socket_demos/images/same54_24.png" alt="" /></p> </li> </ul> <p><strong>CONSOLE</strong> has a dependency on <strong>DEBUG</strong> and <strong>COMMAND</strong> component. To add DEBUG component</p> <ul> <li>Right click on the SYS_CONSOLE interface of Instance 0 of the <strong>CONSOLE</strong> component.</li> <li> <p>Go to <strong>Consumers</strong> and select <strong>DEBUG</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_25.png" alt="" /></p> </li> <li> <p><strong>DEBUG</strong> component connected with <strong>CONSOLE</strong> appears in the Project Graph</p> <p><img src="../../apps/wifi_socket_demos/images/same54_26.png" alt="" /></p> </li> </ul> <h3 id="to-add-command-component"> <a href="#to-add-command-component" aria-labelledby="to-add-command-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> To add COMMAND component </h3> <ul> <li>Right click on the SYS_CONSOLE interface of Instance 0 of the CONSOLE component.</li> <li> <p>Go to Consumers and select COMMAND</p> <p><img src="../../apps/wifi_socket_demos/images/same54_27.png" alt="" /></p> </li> <li> <p>COMMAND component connected with CONSOLE appears in the Project Graph</p> <p><img src="../../apps/wifi_socket_demos/images/same54_28.png" alt="" /></p> </li> </ul> <h3 id="spi-component"> <a href="#spi-component" aria-labelledby="spi-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SPI component </h3> <p>WINC communicates with host using SPI interface. So, to establish a SPI connection between WINC and host, three components are required.<br /> They are:</p> <ul> <li>SPI Driver</li> <li>SERCOM4 (Peripheral library)</li> <li>WINC Driver</li> </ul> <p>To enable SPI driver,</p> <ul> <li>In the Available Components, go to Harmony -&gt; Drivers.</li> <li> <p>Select SPI</p> <p><img src="../../apps/wifi_socket_demos/images/same54_29.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph</p> <p><img src="../../apps/wifi_socket_demos/images/same54_30.png" alt="" /></p> </li> </ul> <p>Connect SERCOM4 with SPI driver.</p> <ul> <li>Right click on the SPI interface of Instance 0 of the SPI component.</li> <li> <p>Go to Satisfiers and select SERCOM4</p> <p><img src="../../apps/wifi_socket_demos/images/same54_31.png" alt="" /></p> </li> </ul> <p>SERCOM4 appears in Project Graph connected with SPI driver.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>![](/wireless_apps_winc3400/apps/wifi_socket_demos/images/same54_32.png)
</code></pre></div></div> <p>Enable DMA for SPI driver</p> <ul> <li>Select instance 0 on SPI driver</li> <li> <p>Go to Configurations Options and enable Use DMA for Transmit and Receive</p> <p><img src="../../apps/wifi_socket_demos/images/same54_33.png" alt="" /></p> </li> <li><strong>SERCOM4</strong> uses PAD[3] for data reception. change the SPI Data In Pad selection property to SERCOM PAD[3] in the Configuration Options</li> <li> <p>Enable the property SPI Master Hardware Slave Select.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_34.png" alt="" /></p> </li> </ul> <h3 id="winc-component"> <a href="#winc-component" aria-labelledby="winc-component" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WINC Component </h3> <p>Enable WINC Driver in the project:</p> <ul> <li>In the Available Components, go to Wireless</li> <li> <p>Select <strong>Driver -&gt; WINC</strong></p> <p><img src="../../apps/wifi_socket_demos/images/same54_35.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_36.png" alt="" /></p> </li> <li> <p>Connect DRV_SPI interface of SPI interface 0 and WINC component</p> <p><img src="../../apps/wifi_socket_demos/images/same54_37.png" alt="" /></p> </li> </ul> <p>User has the option to select between WINC1500 and WINC3400 using the WINC Device configuration option.<br /></p> <p>Enable Interrupt for WINC:</p> <ul> <li>In the configuration options for WINC, expand Interrupt Source</li> <li> <p>Select EIC channel 7</p> <p><img src="../../apps/wifi_socket_demos/images/same54_38.png" alt="" /></p> </li> </ul> <p><strong>WINC3400 BLE:</strong><br /></p> <p>User can enable BLE option in WINC3400 as shown below.</p> <p><img src="../../apps/wifi_socket_demos/images/winc3400_1.png" alt="" /></p> <h3 id="mhc-pin-configuration"> <a href="#mhc-pin-configuration" aria-labelledby="mhc-pin-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MHC PIN Configuration </h3> <p>This section summarizes the pin configuration requirement for MHC pin configuration component.</p> <p>In MHC, user can do pin configuration with the help of below steps</p> <ul> <li>Go to Tools in menu bar</li> <li> <p>Select Pin Configuration</p> <p><img src="../../apps/wifi_socket_demos/images/same54_39.png" alt="" /></p> </li> </ul> <p>The following window appears</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_40.png" alt="" /></p> <p>The pin can be configured as shown below.</p> <ul> <li>RESETN pin configuration:<br /> For WINC1500, <ul> <li>Go to PA06 pin column</li> <li>Change the function to GPIO</li> <li> <p>Name should be changed as “WDRV_WINC_RESETN”</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_41.png" alt="" /></p> </li> </ul> <p>For WINC3400,<br /></p> <ul> <li>Go to PB05 pin column</li> <li>Change the function to GPIO</li> <li> <p>Name should be changed as “WDRV_WINC_RESETN”</p> <p><img src="../../apps/wifi_socket_demos/images/winc3400_2.png" alt="" /></p> </li> </ul> </li> <li>Interrupt pin configuration:<br /> For both WINC1500 and WINC3400, <ul> <li>Go to PB07 pin column</li> <li> <p>Select the function as EIC_EXTINT7</p> <p><img src="../../apps/wifi_socket_demos/images/same54_42.png" alt="" /></p> </li> </ul> </li> <li>Chip enable pin configuration:<br /> For both WINC1500 and WINC3400,<br /> <ul> <li>Go to PA27 of pin column</li> <li>Change the function to GPIO</li> <li> <p>Name should be changed as “WDRV_WINC_CHIP_EN”</p> <p><img src="../../apps/wifi_socket_demos/images/same54_43.png" alt="" /></p> </li> </ul> </li> <li>BLE pin configuration:<br /> This configuration only applicable for WINC3400,</li> <li>Go to PA04 pin column</li> <li>Change the function to SERCOM0_PAD0</li> <li>Go to PA05 pin column</li> <li>Change the function to SERCOM0_PAD1</li> <li>Go to PA06 pin column</li> <li>Change the function to SERCOM0_PAD2</li> <li>Go to PA07 pin column</li> <li> <p>Change the function to SERCOM0_PAD3</p> <p><img src="../../apps/wifi_socket_demos/images/winc3400_3.png" alt="" /></p> </li> <li>SERCOM2 (COM Port) and SERCOM4 (SPI) pin configuration:<br /> For both WINC1500 and WINC3400, <ul> <li>Go to PB24 pin column</li> <li>Change the function to SERCOM2_PAD1</li> <li>Go to PB25 pin column</li> <li>Change the function to SERCOM2_PAD0</li> <li>Go to PB26 pin column</li> <li>Change the function to SERCOM4_PAD1</li> <li>Go to PB27 pin column</li> <li>Change the function to SERCOM4_PAD0</li> <li>Go to PB28 pin column</li> <li>Change the function to SERCOM4_PAD2</li> <li>Go to PB29 pin column</li> <li> <p>Change the function to SERCOM4_PAD3</p> <p><img src="../../apps/wifi_socket_demos/images/same54_44.png" alt="" /></p> </li> </ul> </li> </ul> <h3 id="save-and-generate-code"> <a href="#save-and-generate-code" aria-labelledby="save-and-generate-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Save and generate code </h3> <p>To save the modifications</p> <ul> <li> <p>Click Save Click Generate Code</p> <p><img src="../../apps/wifi_socket_demos/images/same54_46.png" alt="" /></p> </li> <li> <p>In the next window, click Generate</p> <p><img src="../../apps/wifi_socket_demos/images/same54_47.png" alt="" /></p> </li> </ul> <h3 id="application-code"> <a href="#application-code" aria-labelledby="application-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Application Code </h3> <p>With above component and pin configuration in MHC, user has required peripheral libraries and drivers for application development. User can follow the API guidelines to develop the application or follow the below step to create simple application for getting started.</p> <ul> <li>Go to the path {local system path}\wireless_apps_winc1500\apps{User project name}\firmware\src. <ol> <li>app.c</li> <li>app.h</li> <li>example.c</li> </ol> </li> <li>Replace the following files with the files available in the AP scan example project {local system path}\wireless_apps_winc1500\apps\ap_scan\firmware\src</li> <li>As example.c file does not come with default project, create a new file called example.c under Source Files</li> <li>Right click on Source Files</li> <li>Select Add Existing Item</li> <li>Go to {local system path}\wireless_apps_winc1500\apps{User project name}\firmware\src</li> <li>Select example.c</li> <li> <p>In the file example.c, user can change the Home AP credentials.</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_50.png" alt="" /></p> </li> </ul> <h3 id="build-and-program-the-device"> <a href="#build-and-program-the-device" aria-labelledby="build-and-program-the-device" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build and program the device </h3> <p>To compile the project</p> <ul> <li>Right click on the project</li> <li> <p>Select Clean and Build</p> <p><img src="../../apps/wifi_socket_demos/images/same54_51.png" alt="" /></p> </li> </ul> <p>After successful build make sure SAME54 XPRO is connected with local system.</p> <ul> <li>Right click again on the project</li> <li> <p>Select Make and Program Device.</p> <p><img src="../../apps/wifi_socket_demos/images/same54_52.png" alt="" /></p> </li> </ul> <h3 id="output"> <a href="#output" aria-labelledby="output" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output </h3> <p>Expected output</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_53.png" alt="" /></p> <p><strong>Note:</strong><br /> If the user wants to create the project using the FrreRTOS, then follow the below mentioned steps.</p> <p>To add FreeRTOS component</p> <ul> <li> <p>Select FreeRTOS from Thrid party Libraries -&gt; RTOS -&gt; FreeRTOS</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_54.png" alt="" /></p> </li> <li> <p>Drag and drop it in the Project Graph</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_55.png" alt="" /></p> </li> <li> <p>In the configuration options of FreeRTOS, change the <strong>Total heap size</strong> to 10000.</p> <p><img src="../../apps/wifi_socket_demos/images/samd21_56.png" alt="" /></p> </li> </ul> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
